/* Copyright 2015 Karim Piyar Ali
safejs - v.1.0.0 - Built on 2015-08-23 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.sjs=a()}}(function(){var a;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(){"use strict";var _=a("underscore"),c=function(){};c._console=console,c.console=console,c.prototype._isLogging=!0,c.prototype.name="Base",c.prototype.enableLogging=!0,c.prototype.toString=function(){return this.name},c.prototype.log=function(a){if(this.enableLogging){var b=["["+this.toString()+"]"].concat(_.toArray(arguments).slice(1));c.console[a]?c.console[a].apply(c.console,b):c.console.log.apply(c.console,b)}},c.prototype.addProperties=function(a){if(_.isObject(a))for(var b in a)if(!_.isUndefined(this[b]))try{this[b]=a[b]}catch(a){this.log("error",'Could not add property "'+b+'": '+a.toString())}},Object.defineProperties(c,{enableLogging:{get:function(){return this.prototype.enableLogging},set:function(a){this.prototype.enableLogging=a}},console:{get:function(){return c._console},set:function(a){if(!(_.isObject(a)&&_.isFunction(a.log)&&_.isFunction(a.info)&&_.isFunction(a.error)&&_.isFunction(a.warn)))throw TypeError('Error: "console" property must be an object which has the following methods: "log", "debug", "info", "warn" which take in any number of parameters of any type');this._console=a}}}),Object.defineProperties(c.prototype,{enableLogging:{get:function(){return this._isLogging},set:function(a){if(!_.isBoolean(a))throw new TypeError('Property "enableLogging" must be of type: "boolean"');if(_.isNull(c.console))throw new Error('sjs.Base does not have a proper "console" property set.');this._isLogging=a}},name:{writable:!0},toString:{writable:!0},log:{writable:!1},addProperties:{writable:!1},_isLogging:{writable:!0}}),b.exports=c}()},{underscore:7}],2:[function(a,b,c){!function(){"use strict";var c=a("../base/Base.js"),ParamDefinitionError=a("./ParamDefinitionError.js"),_=a("underscore"),d={allowUndefined:!1,allowNull:!1,allowEmpty:!0},e=function(a){if(null!=a)for(var b in d)a[b]=d[b]},f=function(a){for(var b in a)_.isUndefined(d[b])||typeof d[b]!=typeof a[b]||(d[b]=a[b])},ParamDefinition=function ParamDefinition(a){return a instanceof ParamDefinition?a:(this._super.call(this,null),this.applyDefaults(this),(_.isString(a)||_.isArray(a))&&(a={types:a}),void this.addProperties(a))};ParamDefinition.ParamDefinitionError=ParamDefinitionError,ParamDefinition.prototype=Object.create(c.prototype),ParamDefinition.prototype.constructor=ParamDefinition,ParamDefinition.prototype._super=c,ParamDefinition.prototype.name="ParamDefinition",ParamDefinition.prototype._types=["object"],ParamDefinition.prototype.allowUndefined=!1,ParamDefinition.prototype.allowNull=!1,ParamDefinition.prototype.allowEmpty=!0,ParamDefinition.prototype.types=["object"],ParamDefinition.prototype.pos=NaN,ParamDefinition.prototype.paramName="",ParamDefinition.prototype.toString=function(){return this.name},ParamDefinition.prototype.isValidWith=function(a){if(_.isUndefined(a)){if(!this.allowUndefined)throw new ParamDefinitionError(ParamDefinitionError.UNDEFINED_ERROR,a,this);return!0}if(_.isNull(a)){if(!this.allowNull)throw new ParamDefinitionError(ParamDefinitionError.NULL_ERROR,a,this);return!0}for(var b=!1,c=0;c<this._types.length;++c){if("*"===this._types[c])b=!0;else if(_.isObject(this._types[c])&&this._types[c].container&&this._types[c].subDef&&this._types[c].subDef instanceof ParamDefinition)for(var d=0;d<a.length;++d){try{b=this._types[c].subDef.isValidWith(a[d])}catch(a){b=!(a instanceof ParamDefinitionError)}if(!b)break}else if(_.isString(this._types[c])){var e="is"+this._types[c][0].toUpperCase()+this._types[c].substring(1).toLowerCase();_[e]&&(b=_[e](a))}else b=a instanceof this._types[c];if(b)break}if(!b)throw new ParamDefinitionError(ParamDefinitionError.TYPE_ERROR,a,this);if(_.isEmpty(a)&&!this.allowEmpty)throw new ParamDefinitionError(ParamDefinitionError.EMPTY_ERROR,a,this);return!0},Object.defineProperties(ParamDefinition,{setDefaults:{writable:!1,value:f},ParamDefinitionError:{writable:!1}}),Object.defineProperties(ParamDefinition.prototype,{types:{get:function(){return this._types||["object"]},set:function(a){if(null==a)throw new TypeError('Property "types" cannot be null or undefined.');_.isArray(a)||(a=[a]),this._types=[],a.forEach(function(a){if(_.isNull(a))this.allowNull=!0;else if(_.isUndefined(a))this.allowUndefined=!0;else if(_.isArray(a)){if(_.isEmpty(a))throw new TypeError("object"+a+' in array "types" cannot be empty. Please place valid types within the container to indicate valid subtypes of objects within the container or, put in just "array" to indicate the just the container type');this._types.push({container:"array",subDef:new ParamDefinition(a)})}else{if(!_.isString(a)&&!_.isObject(a))throw new TypeError("object "+a+' in array "types" is an invalid type. It can be either: (1) An object, (2) A string, (3) an array of a either objects or strings.');if(_.isString(a)&&_.isEmpty(a))throw new TypeError(a+' in array "types" cannot be empty.');this._types.push(a)}},this)}},allowUndefined:{writable:!0},allowNull:{writable:!0},allowEmpty:{writable:!0},pos:{writable:!0},paramName:{writable:!0},constructor:{writable:!1},_super:{writable:!1},name:{writable:!0},toString:{writable:!0},isValidWith:{writable:!1},applyDefaults:{writable:!1,value:e},_types:{writable:!0}}),b.exports=ParamDefinition}()},{"../base/Base.js":1,"./ParamDefinitionError.js":3,underscore:7}],3:[function(a,b,c){!function(){"use strict";var _=a("underscore"),ParamDefinitionError=function ParamDefinitionError(a,b,d,e){var f="Error: parameter ";switch(this.paramDef=d,_.isString(this.paramDef.paramName)&&(f+=this.paramDef.paramName+" "),a){case ParamDefinitionError.UNDEFINED_ERROR:case ParamDefinitionError.NULL_ERROR:case ParamDefinitionError.EMPTY_ERROR:case ParamDefinitionError.TYPE_ERROR:this.errorType=a;break;default:this.errorType=ParamDefinitionError.TYPE_ERROR}f+=this.errorType,_.isArray(this.paramDef.types)&&this.errorType===ParamDefinitionError.TYPE_ERROR&&(this.paramValue=b,this.foundTypes=typeof b,f+=" Expected types: "+c(this.paramDef.types)+". Found type: "+this.foundTypes+"."),_.isString(e)&&(f+=" "+e),this._super.call(this,f),this.message=f};ParamDefinitionError.UNDEFINED_ERROR="cannot be undefined.",ParamDefinitionError.NULL_ERROR="cannot be null.",ParamDefinitionError.EMPTY_ERROR="cannot be emtpy.",ParamDefinitionError.TYPE_ERROR="has invalid types.",ParamDefinitionError.prototype=Object.create(TypeError.prototype),ParamDefinitionError.prototype.constructor=ParamDefinitionError,ParamDefinitionError.prototype._super=TypeError,ParamDefinitionError.prototype.name="ParamDefinitionError",ParamDefinitionError.prototype._methodName="",ParamDefinitionError.prototype.methodName="",ParamDefinitionError.prototype.toString=function(){return this.name};var c=function(a){var b="[";return a.forEach(function(d,e){b+=_.isString(d)?d:_.isObject(d)&&d.subDef&&_.isArray(d.subDef.types)?c(d.subDef.types):d.name||d.toString(),e!==a.length-1&&(b+=", ")},this),b+"]"};Object.defineProperties(ParamDefinitionError,{UNDEFINED_ERROR:{writable:!1},NULL_ERROR:{writable:!1},EMPTY_ERROR:{writable:!1},TYPE_ERROR:{writable:!1},constructor:{writable:!1},_super:{writable:!1}}),Object.defineProperties(ParamDefinitionError.prototype,{methodName:{get:function(){return this._methodName},set:function(a){this._methodName=a,_.isString(this._methodName)&&!_.isEmpty(this._methodName)&&(this.message="["+this._methodName+"] "+this.message)}},name:{writable:!0}}),b.exports=ParamDefinitionError}()},{underscore:7}],4:[function(a,b,c){!function(){"use strict";var ParamDefinition=a("./ParamDefinition.js"),_=a("underscore"),c=function(a,b){return a=new ParamDefinition(a),a.paramName=b.toString(),a},d=function(a){try{return a[0].isValidWith(a[1])}catch(a){if(a instanceof ParamDefinition.ParamDefinitionError)throw a.methodName=this.name,a}},e=function(a,b,e,f){if(!_.isObject(a))throw new TypeError('Parameter definitions must be of type: "Object" or "Array"');_.isObject(e)||(e=null);var g=_.map(a,c);return _.wrap(b,function(a){var b=Array.prototype.slice.call(arguments,1);return this.name=f||a.name,_.zip(g,b).forEach(d,this),a.apply(e,b)})};b.exports=e}()},{"./ParamDefinition.js":2,underscore:7}],5:[function(a,b,c){!function(){"use strict";var _=a("underscore"),c=function a(b,c){return b instanceof a?b:(this.val=b,void(c instanceof a&&(this.parent=c)))};c.prototype.val=void 0,c.prototype._parent=void 0,c.prototype.parent=void 0,c.prototype.isEmpty=function(){return _.isEmpty(this.val)},c.prototype.isNull=function(){return _.isNull(this.val)},c.prototype.isUndefined=function(){return _.isUndefined(this.val)},c.prototype.try=function(a){return _.isObject(this.val)?new c(this.val[a],this):new c({},this)},c.prototype.propertyExists=function(a){return _.isObject(this.val)&&null!=this.val[a]},Object.defineProperties(c.prototype,{parent:{get:function(){return this._parent instanceof c?this._parent:new c(this._parent)},set:function(a){this._parent=new c(a)}}}),b.exports=c}()},{underscore:7}],6:[function(a,b,c){!function(){"use strict";var sjs={Base:a("./base/Base.js"),ParamDefinition:a("./function/ParamDefinition.js"),func:a("./function/func.js"),SafeObject:a("./obj/SafeObject.js"),enableLogging:!0};Object.defineProperties(sjs,{enableLogging:{get:function(){return this.Base.enableLogging},set:function(a){this.Base.enableLogging=a}},Base:{writable:!1},ParamDefinition:{writable:!1},func:{writable:!1},SafeObject:{writable:!1}}),b.exports=sjs}()},{"./base/Base.js":1,"./function/ParamDefinition.js":2,"./function/func.js":4,"./obj/SafeObject.js":5}],7:[function(b,c,d){(function(){function b(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=v(d,f,4);var g=!C(c)&&_.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function e(a){return function(b,c,d){c=w(c,d);for(var e=B(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function f(a,b,c){return function(d,e,f){var g=0,h=B(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(n.call(d,g,h),_.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function g(a,b){var c=H.length,d=a.constructor,e=_.isFunction(d)&&d.prototype||k,f="constructor";for(_.has(a,f)&&!_.contains(b,f)&&b.push(f);c--;)f=H[c],f in a&&a[f]!==e[f]&&!_.contains(b,f)&&b.push(f)}var h=this,i=h._,j=Array.prototype,k=Object.prototype,l=Function.prototype,m=j.push,n=j.slice,o=k.toString,p=k.hasOwnProperty,q=Array.isArray,r=Object.keys,s=l.bind,t=Object.create,u=function(){},_=function(a){return a instanceof _?a:this instanceof _?void(this._wrapped=a):new _(a)};"undefined"!=typeof d?("undefined"!=typeof c&&c.exports&&(d=c.exports=_),d._=_):h._=_,_.VERSION="1.8.3";var v=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},w=function(a,b,c){return null==a?_.identity:_.isFunction(a)?v(a,b,c):_.isObject(a)?_.matcher(a):_.property(a)};_.iteratee=function(a,b){return w(a,b,1/0)};var x=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},y=function(a){if(!_.isObject(a))return{};if(t)return t(a);u.prototype=a;var b=new u;return u.prototype=null,b},z=function(a){return function(b){return null==b?void 0:b[a]}},A=Math.pow(2,53)-1,B=z("length"),C=function(a){var b=B(a);return"number"==typeof b&&b>=0&&A>=b};_.each=_.forEach=function(a,b,c){b=v(b,c);var d,e;if(C(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=_.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},_.map=_.collect=function(a,b,c){b=w(b,c);for(var d=!C(a)&&_.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},_.reduce=_.foldl=_.inject=b(1),_.reduceRight=_.foldr=b(-1),_.find=_.detect=function(a,b,c){var d;return d=C(a)?_.findIndex(a,b,c):_.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},_.filter=_.select=function(a,b,c){var d=[];return b=w(b,c),_.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},_.reject=function(a,b,c){return _.filter(a,_.negate(w(b)),c)},_.every=_.all=function(a,b,c){b=w(b,c);for(var d=!C(a)&&_.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},_.some=_.any=function(a,b,c){b=w(b,c);for(var d=!C(a)&&_.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},_.contains=_.includes=_.include=function(a,b,c,d){return C(a)||(a=_.values(a)),("number"!=typeof c||d)&&(c=0),_.indexOf(a,b,c)>=0},_.invoke=function(a,b){var c=n.call(arguments,2),d=_.isFunction(b);return _.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},_.pluck=function(a,b){return _.map(a,_.property(b))},_.where=function(a,b){return _.filter(a,_.matcher(b))},_.findWhere=function(a,b){return _.find(a,_.matcher(b))},_.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=C(a)?a:_.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=w(b,c),_.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},_.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=C(a)?a:_.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=w(b,c),_.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},_.shuffle=function(a){for(var b,c=C(a)?a:_.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=_.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},_.sample=function(a,b,c){return null==b||c?(C(a)||(a=_.values(a)),a[_.random(a.length-1)]):_.shuffle(a).slice(0,Math.max(0,b))},_.sortBy=function(a,b,c){return b=w(b,c),_.pluck(_.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var D=function(a){return function(b,c,d){var e={};return c=w(c,d),_.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};_.groupBy=D(function(a,b,c){_.has(a,c)?a[c].push(b):a[c]=[b]}),_.indexBy=D(function(a,b,c){a[c]=b}),_.countBy=D(function(a,b,c){_.has(a,c)?a[c]++:a[c]=1}),_.toArray=function(a){return a?_.isArray(a)?n.call(a):C(a)?_.map(a,_.identity):_.values(a):[]},_.size=function(a){return null==a?0:C(a)?a.length:_.keys(a).length},_.partition=function(a,b,c){b=w(b,c);var d=[],e=[];return _.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},_.first=_.head=_.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:_.initial(a,a.length-b)},_.initial=function(a,b,c){return n.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},_.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:_.rest(a,Math.max(0,a.length-b))},_.rest=_.tail=_.drop=function(a,b,c){return n.call(a,null==b||c?1:b)},_.compact=function(a){return _.filter(a,_.identity)};var E=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=B(a);h>g;g++){var i=a[g];if(C(i)&&(_.isArray(i)||_.isArguments(i))){b||(i=E(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};_.flatten=function(a,b){return E(a,b,!1)},_.without=function(a){return _.difference(a,n.call(arguments,1))},_.uniq=_.unique=function(a,b,c,d){_.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=w(c,d));for(var e=[],f=[],g=0,h=B(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?_.contains(f,j)||(f.push(j),e.push(i)):_.contains(e,i)||e.push(i)}return e},_.union=function(){return _.uniq(E(arguments,!0,!0))},_.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=B(a);e>d;d++){var f=a[d];if(!_.contains(b,f)){for(var g=1;c>g&&_.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},_.difference=function(a){var b=E(arguments,!0,!0,1);return _.filter(a,function(a){return!_.contains(b,a)})},_.zip=function(){return _.unzip(arguments)},_.unzip=function(a){for(var b=a&&_.max(a,B).length||0,c=Array(b),d=0;b>d;d++)c[d]=_.pluck(a,d);return c},_.object=function(a,b){for(var c={},d=0,e=B(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},_.findIndex=e(1),_.findLastIndex=e(-1),_.sortedIndex=function(a,b,c,d){c=w(c,d,1);for(var e=c(b),f=0,g=B(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},_.indexOf=f(1,_.findIndex,_.sortedIndex),_.lastIndexOf=f(-1,_.findLastIndex),_.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var F=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=y(a.prototype),g=a.apply(f,e);return _.isObject(g)?g:f};_.bind=function(a,b){if(s&&a.bind===s)return s.apply(a,n.call(arguments,1));if(!_.isFunction(a))throw new TypeError("Bind must be called on a function");var c=n.call(arguments,2),d=function(){return F(a,d,b,this,c.concat(n.call(arguments)))};return d},_.partial=function(a){var b=n.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===_?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return F(a,c,this,this,f)};return c},_.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=_.bind(a[c],a);return a},_.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return _.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},_.delay=function(a,b){var c=n.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},_.defer=_.partial(_.delay,_,1),_.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:_.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=_.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},_.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=_.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=_.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},_.wrap=function(a,b){return _.partial(b,a)},_.negate=function(a){return function(){return!a.apply(this,arguments)}},_.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},_.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},_.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},_.once=_.partial(_.before,2);var G=!{toString:null}.propertyIsEnumerable("toString"),H=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];_.keys=function(a){if(!_.isObject(a))return[];if(r)return r(a);var b=[];for(var c in a)_.has(a,c)&&b.push(c);return G&&g(a,b),b},_.allKeys=function(a){if(!_.isObject(a))return[];var b=[];for(var c in a)b.push(c);return G&&g(a,b),b},_.values=function(a){for(var b=_.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},_.mapObject=function(a,b,c){b=w(b,c);for(var d,e=_.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},_.pairs=function(a){for(var b=_.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},_.invert=function(a){for(var b={},c=_.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},_.functions=_.methods=function(a){var b=[];for(var c in a)_.isFunction(a[c])&&b.push(c);return b.sort()},_.extend=x(_.allKeys),_.extendOwn=_.assign=x(_.keys),_.findKey=function(a,b,c){b=w(b,c);for(var d,e=_.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},_.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;_.isFunction(b)?(e=_.allKeys(g),d=v(b,c)):(e=E(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},_.omit=function(a,b,c){if(_.isFunction(b))b=_.negate(b);else{var d=_.map(E(arguments,!1,!1,1),String);b=function(a,b){return!_.contains(d,b)}}return _.pick(a,b,c)},_.defaults=x(_.allKeys,!0),_.create=function(a,b){var c=y(a);return b&&_.extendOwn(c,b),c},_.clone=function(a){return _.isObject(a)?_.isArray(a)?a.slice():_.extend({},a):a},_.tap=function(a,b){return b(a),a},_.isMatch=function(a,b){var c=_.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var I=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof _&&(a=a._wrapped),b instanceof _&&(b=b._wrapped);var e=o.call(a);if(e!==o.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(_.isFunction(g)&&g instanceof g&&_.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!I(a[i],b[i],c,d))return!1}else{var j,k=_.keys(a);if(i=k.length,_.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!_.has(b,j)||!I(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};_.isEqual=function(a,b){return I(a,b)},_.isEmpty=function(a){return null==a?!0:C(a)&&(_.isArray(a)||_.isString(a)||_.isArguments(a))?0===a.length:0===_.keys(a).length},_.isElement=function(a){return!(!a||1!==a.nodeType)},_.isArray=q||function(a){return"[object Array]"===o.call(a)},_.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){_["is"+a]=function(b){return o.call(b)==="[object "+a+"]"}}),_.isArguments(arguments)||(_.isArguments=function(a){return _.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(_.isFunction=function(a){return"function"==typeof a||!1}),_.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},_.isNaN=function(a){return _.isNumber(a)&&a!==+a},_.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===o.call(a)},_.isNull=function(a){return null===a},_.isUndefined=function(a){return void 0===a},_.has=function(a,b){return null!=a&&p.call(a,b)},_.noConflict=function(){return h._=i,this},_.identity=function(a){return a},_.constant=function(a){return function(){return a}},_.noop=function(){},_.property=z,_.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},_.matcher=_.matches=function(a){return a=_.extendOwn({},a),function(b){return _.isMatch(b,a)}},_.times=function(a,b,c){var d=Array(Math.max(0,a));b=v(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},_.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},_.now=Date.now||function(){return(new Date).getTime()};var J={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},K=_.invert(J),L=function(a){var b=function(b){return a[b]},c="(?:"+_.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};_.escape=L(J),_.unescape=L(K),_.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),_.isFunction(d)?d.call(a):d};var M=0;_.uniqueId=function(a){var b=++M+"";return a?a+b:b},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(a){return"\\"+O[a]};_.template=function(a,b,c){!b&&c&&(b=c),b=_.defaults({},b,_.templateSettings);var d=RegExp([(b.escape||N).source,(b.interpolate||N).source,(b.evaluate||N).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(P,Q),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(a){throw a.source=f,a}var h=function(a){return g.call(this,a,_)},i=b.variable||"obj";return h.source="function("+i+"){\n"+f+"}",h},_.chain=function(a){var b=_(a);return b._chain=!0,b};var R=function(a,b){return a._chain?_(b).chain():b};_.mixin=function(a){_.each(_.functions(a),function(b){var c=_[b]=a[b];_.prototype[b]=function(){var a=[this._wrapped];return m.apply(a,arguments),R(this,c.apply(_,a))}})},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=j[a];_.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],R(this,c)}}),_.each(["concat","join","slice"],function(a){var b=j[a];_.prototype[a]=function(){return R(this,b.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return""+this._wrapped},"function"==typeof a&&a.amd&&a("underscore",[],function(){return _})}).call(this)},{}]},{},[6])(6)});